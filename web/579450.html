<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
    <meta charset="utf-8">
    <title>空氣品質監測站</title>
    <link href="css/arduino-1.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Caveat" rel="stylesheet">
    <link href="images/2.jpg" rel="shortcut icon">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script>
        //<!-- 抓最新資料  -->
        $(function () {
            $.getJSON("https://api.thingspeak.com/channels/579450/feeds/last.json?key=37O2F5XCOC4ZV4DV", function (data) {
                $("timedata").append("<p>" + data.created_at + "</p>");
                $("tempdata").append(data.field1 + "° C");
                if (28 <= data.field1) {
                    $("tempdata").css('color', '#ff0000')
                    $("Tempadvise").append("目前溫度過高，建議開冷氣")
                } else if (18 < data.field1) {
                    $("tempdata").css('color', '#000')
                    $("Tempadvise").append("目前溫度適宜")
                } else {
                    $("tempdata").css('color', '#ff0000')
                    $("Tempadvise").append("溫度過低，建議開暖氣")
                };
                $("humidata").append(data.field2 + " %");
                if (70 <= data.field2) {
                    $("humidata").css('color', '#ff0000')
                } else if (30 < data.field2) {
                    $("humidata").css('color', '#000')
                } else {
                    $("humidata").css('color', '#ff0000')
                };
                $("LPGdata").append(data.field3 + " ppm");
                $("COdata").append(data.field4 + " ppm");
                $("SMOKEdata").append(data.field5 + " ppm");
                $("PM1data").append(data.field6 + " ppm");
                $("PM25data").append(data.field7 + " ppm");
                if (70 < data.field7) {
                    $("PM25data").css('color', '#ff0000');
                    $("PM25advise").append("PM2.5濃度過高，建議不要外出")
                } else if (53 < data.field7) {
                    $("PM25data").css('color', '#ff0000');
                    $("PM25advise").append("PM2.5濃度偏高，建議避免外出")
                } else if (35 < data.field7) {
                    $("PM25data").css('color', '#000');
                    $("PM25advise").append("PM2.5濃度中，可正常外出，敏感族群建議避免外出")
                } else {
                    $("PM25data").css('color', '#000');
                    $("PM25advise").append("PM2.5濃度低，可正常外出")

                };

                $("PM10data").append(data.field8 + " ppm");

            });


        });


        function openDialog(showchart) {                 //<!-- 開啟懸浮視窗  -->

            if (showchart == tempchart) {
                document.getElementById('tempchart').style.display = 'block';
            } else if (showchart == humichart) {
                document.getElementById('humichart').style.display = 'block';
            } else if (showchart == LPGchart) {
                document.getElementById('LPGchart').style.display = 'block';
            } else if (showchart == COchart) {
                document.getElementById('COchart').style.display = 'block';
            } else if (showchart == PM1chart) {
                document.getElementById('PM1chart').style.display = 'block';
            } else if (showchart == PM25chart) {
                document.getElementById('PM25chart').style.display = 'block';
            } else if (showchart == PM10chart) {
                document.getElementById('PM10chart').style.display = 'block';
            } else if (showchart == SMOKEchart) {
                document.getElementById('SMOKEchart').style.display = 'block'
            }
        }
        function closeDialog() {                        //<!-- 關閉懸浮視窗  -->
            document.getElementById('tempchart').style.display = 'none';
            document.getElementById('humichart').style.display = 'none';
            document.getElementById('LPGchart').style.display = 'none';
            document.getElementById('COchart').style.display = 'none';
            document.getElementById('PM1chart').style.display = 'none';
            document.getElementById('PM25chart').style.display = 'none';
            document.getElementById('PM10chart').style.display = 'none';
            document.getElementById('SMOKEchart').style.display = 'none';
        }


    </script>

</head>

<body>
    <div class="container">
        <div class="content">
            <!-- 標題  -->
            <a href="index.html">
            <img src="images/2.jpg" title="返回首頁" class="author">
            </a><h1>空氣品質監測第二站</h1>
            <div class="clear"></div>

            <!--建議-->
            <div class="advise">
                <h2>溫度:
                    <Tempadvise></Tempadvise>
                </h2>
                <h2>PM2.5濃度:
                    <PM25advise></PM25advise>
                </h2>

            </div>


            <!-- 懸浮視窗  -->
            <div id="tempchart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>
            <div id="humichart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>
            <div id="LPGchart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>
            <div id="COchart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/4?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>
            <div id="PM1chart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/6?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>
            <div id="PM25chart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/7?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>
            <div id="PM10chart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/8?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>
            <div id="SMOKEchart" class="white_content">
                <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/
                506100/charts/5?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&timescale=10&type=line"></iframe>
                <br>
                <a href="javascript:void(0)" onclick="closeDialog()">關閉</a>
            </div>


            <!-- 小方塊 -->
            <div class="items">
                <a href="JavaScript:void(0)" onclick="openDialog(tempchart)">
                    <!--小方塊按鈕-->
                    <div class="item">
                        <img src="images/a.jpg" class="flag">
                        <!--小方塊標題-->
                        <p class="data">
                            <tempdata></tempdata>
                            <!--小方塊數據-->

                        </p>
                    </div>
                </a>

                <a href="JavaScript:void(0)" onclick="openDialog(humichart)">
                    <div class="item">
                        <img src="images/b.jpg" class="flag">
                        <p class="data">
                            <humidata></humidata>
                        </p>
                    </div>
                </a>

                <a href="JavaScript:void(0)" onclick="openDialog(LPGchart)">
                    <div class="item">
                        <img src="images/c.jpg" class="flag">
                        <p class="data">
                            <LPGdata></LPGdata>
                        </p>
                    </div>
                </a>
                <a href="JavaScript:void(0)" onclick="openDialog(COchart)">
                    <div class="item">
                        <img src="images/d.jpg" class="flag">
                        <p class="data">
                            <COdata></COdata>
                        </p>
                    </div>
                </a>

                <div class="clear"></div>
            </div>

            <div class="items2">
                <a href="JavaScript:void(0)" onclick="openDialog(PM1chart)">
                    <div class="item">
                        <img src="images/e.jpg" class="flag">
                        <p class="data">
                            <PM1data></PM1data>
                        </p>
                    </div>
                </a>

                <a href="JavaScript:void(0)" onclick="openDialog(PM25chart)">
                    <div class="item">
                        <img src="images/f.jpg" class="flag">
                        <p class="data">
                            <PM25data></PM25data>
                        </p>
                    </div>
                </a>

                <a href="JavaScript:void(0)" onclick="openDialog(PM10chart)">
                    <div class="item">
                        <img src="images/g.jpg" class="flag">
                        <p class="data">
                            <PM10data></PM10data>
                        </p>
                    </div>
                </a>
                <a href="JavaScript:void(0)" onclick="openDialog(SMOKEchart)">
                    <div class="item">
                        <img src="images/h.jpg" class="flag">
                        <p class="data">
                            <SMOKEdata></SMOKEdata>
                        </p>
                    </div>
                </a>

                <div class="clear"></div>
            </div>
        </div>

        <!-- 頁尾copyright  -->
        <div class="footer">
            Copyright &copy;2018, ntub107201.
        </div>
    </div>
</body>

</html>